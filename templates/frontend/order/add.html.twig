{% extends 'base.html.twig' %}

{% block title %}Récapitulatif commande | 3DWWM{% endblock %}

{% block content %}
    <h1>RÉCAPITULATIF COMMANDE</h1>

    <div class="row">
        <div class="col-md-6">
            <p><strong>Adresse de livraison</strong></p>
            {{ delivery|raw }}

            <p><strong>Transporteur</strong></p>
            {{ carrier.name }}
        </div>
        <div class="col-md-6">
            <p><strong>Récapitulatif de ma commande :</strong></p>
            {% set total = null %}
            {% for element in cart %}
                <div class="row">
                    <div class="col-8">
                        {{ element.product.name }}
                        <br>
                        <small>
                            x{{ element.quantity }}
                        </small>
                    </div>
                    <div class="col-4">
                        {{ (element.product.price * element.quantity / 100) | number_format(2, ',', '.') }}€
                    </div>
                </div>
            {% set total = total + (element.product.price * element.quantity) %}
            {% endfor %}
            <br>
            <p><strong>Total articles : </strong>{{ (total / 100)|number_format(2, ',', '.') }}€</p>
            <p><strong>Livraison : </strong>{{ (carrier.price / 100)|number_format(2, ',', '.') }}€</p>
            <p><strong>Total commande : </strong>{{ ((total / 100) + (carrier.price / 100)) | number_format(2, ',', '.') }}€</p>
            <a href="{{ path('app_frontend_order_pay', {id: id}) }}" class="btn btn-primary btn-block mt-3">Procéder au paiement</a>
        </div>
    </div>
{% endblock %}